// Add LS byproduct to White Spice fuel cells
// - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
// @PART[dsts_fuelcell_srf]:NEEDS[USILifeSupport|TacLifeSupport|Snacks|DeepFreeze]
// {
	// @MODULE[ModuleResourceConverter]
	// {
		// mult 1
		// OUTPUT_RESOURCE:NEEDS[USILifeSupport]
		// {
			// ResourceName = Supplies
			// Ratio = 0.00032
			// DumpExcess = true
		// }
		// OUTPUT_RESOURCE:NEEDS[Snacks]
		// {
			// ResourceName = Snacks
			// Ratio = 0.00032
			// DumpExcess = true
		// }
		// OUTPUT_RESOURCE:NEEDS[TacLifeSupport]
		// {
			// ResourceName = Food
			// Ratio =  0.0003
			// DumpExcess = true
		// }
		// OUTPUT_RESOURCE:NEEDS[TacLifeSupport]
		// {
			// ResourceName = Water
			// Ratio = 0.00015
			// DumpExcess = true
		// }
		// OUTPUT_RESOURCE:NEEDS[TacLifeSupport]
		// {
			// ResourceName = Oxygen
			// Ratio = 0.0003
			// DumpExcess = true
		// }
		// OUTPUT_RESOURCE:NEEDS[DeepFreeze]
		// {
			// ResourceName = Glykerol
			// Ratio = 0.006
			// DumpExcess = true
		// }
	// }
// }

// @PART[dsts_fuelcell_125|dsts_fuelcell_mk2]:NEEDS[USILifeSupport|TacLifeSupport|Snacks|DeepFreeze]
// {
	// @MODULE[ModuleResourceConverter]
	// {
		// mult 2
		// OUTPUT_RESOURCE:NEEDS[USILifeSupport]
		// {
			// ResourceName = Supplies
			// Ratio = 0.00064
			// DumpExcess = true
		// }
		// OUTPUT_RESOURCE:NEEDS[Snacks]
		// {
			// ResourceName = Snacks
			// Ratio = 0.00064
			// DumpExcess = true
		// }
		// OUTPUT_RESOURCE:NEEDS[TacLifeSupport]
		// {
			// ResourceName = Food
			// Ratio =  0.0006
			// DumpExcess = true
		// }
		// OUTPUT_RESOURCE:NEEDS[TacLifeSupport]
		// {
			// ResourceName = Water
			// Ratio = 0.0003
			// DumpExcess = true
		// }
		// OUTPUT_RESOURCE:NEEDS[TacLifeSupport]
		// {
			// ResourceName = Oxygen
			// Ratio = 0.0006
			// DumpExcess = true
		// }
		// OUTPUT_RESOURCE:NEEDS[DeepFreeze]
		// {
			// ResourceName = Glykerol
			// Ratio = 0.012
			// DumpExcess = true
		// }
	// }
// }

// @PART[dsts_fuelcell_250]:NEEDS[USILifeSupport|TacLifeSupport|Snacks|DeepFreeze]
// {
	// @MODULE[ModuleResourceConverter]
	// {
		//mult 4
		// OUTPUT_RESOURCE:NEEDS[USILifeSupport]
		// {
			// ResourceName = Supplies
			// Ratio = 0.00128
			// DumpExcess = true
		// }
		// OUTPUT_RESOURCE:NEEDS[Snacks]
		// {
			// ResourceName = Snacks
			// Ratio = 0.00128
			// DumpExcess = true
		// }
		// OUTPUT_RESOURCE:NEEDS[TacLifeSupport]
		// {
			// ResourceName = Food
			// Ratio =  0.0012
			// DumpExcess = true
		// }
		// OUTPUT_RESOURCE:NEEDS[TacLifeSupport]
		// {
			// ResourceName = Water
			// Ratio = 0.0006
			// DumpExcess = true
		// }
		// OUTPUT_RESOURCE:NEEDS[TacLifeSupport]
		// {
			// ResourceName = Oxygen
			// Ratio = 0.0012
			// DumpExcess = true
		// }
		// OUTPUT_RESOURCE:NEEDS[DeepFreeze]
		// {
			// ResourceName = Glykerol
			// Ratio = 0.024
			// DumpExcess = true
		// }
	// }
// }

@PART[dsts_fusioncore]:NEEDS[!NearFutureElectrical]
{
	@MODULE[ModuleResourceConverter]
	{
		// mult 25 (size 2 * 6.25)
		OUTPUT_RESOURCE:NEEDS[USILifeSupport]
		{
			ResourceName = Supplies
			Ratio = 0.008
			DumpExcess = true
		}
		OUTPUT_RESOURCE:NEEDS[Snacks]
		{
			ResourceName = Snacks
			Ratio = 0.008
			DumpExcess = true
		}
		OUTPUT_RESOURCE:NEEDS[TacLifeSupport]
		{
			ResourceName = Food
			Ratio =  0.0075
			DumpExcess = true
		}
		OUTPUT_RESOURCE:NEEDS[TacLifeSupport]
		{
			ResourceName = Water
			Ratio = 0.00375
			DumpExcess = true
		}
		OUTPUT_RESOURCE:NEEDS[TacLifeSupport]
		{
			ResourceName = Oxygen
			Ratio = 0.0075
			DumpExcess = true
		}
		OUTPUT_RESOURCE:NEEDS[DeepFreeze]
		{
			ResourceName = Glykerol
			Ratio = 0.15
			DumpExcess = true
		}
	}
	
	// @MODULE[FissionReactor]:NEEDS[NearFutureElectrical]
	// {
		//mult 25 (size 2 * 6.25)
		// OUTPUT_RESOURCE:NEEDS[USILifeSupport]
		// {
			// ResourceName = Supplies
			// Ratio = 0.008
			// DumpExcess = true
		// }
		// OUTPUT_RESOURCE:NEEDS[Snacks]
		// {
			// ResourceName = Snacks
			// Ratio = 0.008
			// DumpExcess = true
		// }
		// OUTPUT_RESOURCE:NEEDS[TacLifeSupport]
		// {
			// ResourceName = Food
			// Ratio =  0.0075
			// DumpExcess = true
		// }
		// OUTPUT_RESOURCE:NEEDS[TacLifeSupport]
		// {
			// ResourceName = Water
			// Ratio = 0.00375
			// DumpExcess = true
		// }
		// OUTPUT_RESOURCE:NEEDS[TacLifeSupport]
		// {
			// ResourceName = Oxygen
			// Ratio = 0.0075
			// DumpExcess = true
		// }
		// OUTPUT_RESOURCE:NEEDS[DeepFreeze]:AFTER[NearFutureElectrical]
		// {
			// ResourceName = Glykerol
			// Ratio = 0.15
			// DumpExcess = true
		// }
	// }
}


//Update descriptions
// - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
@PART[dsts_spiceapp_srf|dsts_spiceapp_125|dsts_spiceapp_mk2|dsts_spiceapp_250]:NEEDS[USILifeSupport]
{
	@description = The Spice extends life. A set-and-forget part, this so-called hub extends life by passively dispersing the Spice throughout the vessel and delivering it to the kerbals themsevles-- rather, into the Supplies.
}
@PART[dsts_spiceapp_srf|dsts_spiceapp_125|dsts_spiceapp_mk2|dsts_spiceapp_250]:NEEDS[TacLifeSupport]
{
	@description = The Spice extends life. A set-and-forget part, this so-called hub extends life by passively dispersing the Spice throughout the vessel and delivering it to the kerbals themsevles-- rather, into the Food, Air and Water.
}
@PART[dsts_spiceapp_srf|dsts_spiceapp_125|dsts_spiceapp_mk2|dsts_spiceapp_250]:NEEDS[Snacks]
{
	@description = The Spice extends life. A set-and-forget part, this so-called hub extends life by passively dispersing the Spice throughout the vessel and delivering it to the kerbals themsevles-- rather, into the Snacks.
}


//Insert LS converter module
// - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
@PART[dsts_spiceapp_srf]:NEEDS[USILifeSupport|TacLifeSupport|Snacks|DeepFreeze]
{
	// mult 1
	MODULE
	{
		name = ModuleResourceConverter
		ConverterName = Spice Infusion
		StartActionName = Start Extending Life
		StopActionName = Stop Extending Life
		ToggleActionName = Toggle The Spice
		AutoShutdown = false
		GeneratesHeat = false
		UseSpecialistBonus = false
		
		INPUT_RESOURCE
		{
			ResourceName = SpiceMelange
			Ratio = 0.0005
		}
		INPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 2.15
		}
		OUTPUT_RESOURCE
		{
			ResourceName = MonoPropellant
			Ratio = 0.03
			DumpExcess = true
		}
		OUTPUT_RESOURCE:NEEDS[USILifeSupport]
		{
			ResourceName = Supplies
			Ratio = 0.0032 //0.0005
			DumpExcess = true
		}
		OUTPUT_RESOURCE:NEEDS[Snacks]
		{
			ResourceName = Snacks
			Ratio = 0.0032 //0.000034723
			DumpExcess = true
		}
		OUTPUT_RESOURCE:NEEDS[TacLifeSupport]
		{
			ResourceName = Food
			Ratio =  0.003 //0.000016927083333
			DumpExcess = true
		}
		OUTPUT_RESOURCE:NEEDS[TacLifeSupport]
		{
			ResourceName = Water
			Ratio =  0.0015 //0.000011188078704
			DumpExcess = true
		}
		OUTPUT_RESOURCE:NEEDS[TacLifeSupport]
		{
			ResourceName = Oxygen
			Ratio =  0.003 //0.001713537562385
			DumpExcess = true
		}
		OUTPUT_RESOURCE:NEEDS[DeepFreeze]
		{
			ResourceName = Glykerol
			Ratio =  0.005
			DumpExcess = true
		}
	}
}

@PART[dsts_spiceapp_125|dsts_spiceapp_mk2]:NEEDS[USILifeSupport|TacLifeSupport|Snacks|DeepFreeze]
{
	//mult 2
	MODULE
	{
		name = ModuleResourceConverter
		ConverterName = Spice Infusion
		StartActionName = Start Extending Life
		StopActionName = Stop Extending Life
		ToggleActionName = Toggle The Spice
		AutoShutdown = false
		GeneratesHeat = false
		UseSpecialistBonus = false
		
		INPUT_RESOURCE
		{
			ResourceName = SpiceMelange
			Ratio = 0.001
		}
		INPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 4.3
		}
		OUTPUT_RESOURCE
		{
			ResourceName = MonoPropellant
			Ratio = 0.06
			DumpExcess = true
		}
		OUTPUT_RESOURCE:NEEDS[USILifeSupport]
		{
			ResourceName = Supplies
			Ratio = 0.0064 //0.0005
			DumpExcess = true
		}
		OUTPUT_RESOURCE:NEEDS[Snacks]
		{
			ResourceName = Snacks
			Ratio = 0.0064 //0.000034723
			DumpExcess = true
		}
		OUTPUT_RESOURCE:NEEDS[TacLifeSupport]
		{
			ResourceName = Food
			Ratio =  0.006 //0.000016927083333
			DumpExcess = true
		}
		OUTPUT_RESOURCE:NEEDS[TacLifeSupport]
		{
			ResourceName = Water
			Ratio =  0.003 //0.000011188078704
			DumpExcess = true
		}
		OUTPUT_RESOURCE:NEEDS[TacLifeSupport]
		{
			ResourceName = Oxygen
			Ratio =  0.006 //0.001713537562385
			DumpExcess = true
		}
		OUTPUT_RESOURCE:NEEDS[DeepFreeze]
		{
			ResourceName = Glykerol
			Ratio =  0.01
			DumpExcess = true
		}
	}
}

@PART[dsts_spiceapp_250|dsts_gardenL|dsts_gardenM]:NEEDS[USILifeSupport|TacLifeSupport|Snacks|DeepFreeze]
{
	//mult 4
	MODULE
	{
		name = ModuleResourceConverter
		ConverterName = Spice Infusion
		StartActionName = Start Extending Life
		StopActionName = Stop Extending Life
		ToggleActionName = Toggle The Spice
		AutoShutdown = false
		GeneratesHeat = false
		UseSpecialistBonus = false
		
		INPUT_RESOURCE
		{
			ResourceName = SpiceMelange
			Ratio = 0.002
		}
		INPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 8.6
		}
		OUTPUT_RESOURCE
		{
			ResourceName = MonoPropellant
			Ratio = 0.12
			DumpExcess = true
		}
		OUTPUT_RESOURCE:NEEDS[USILifeSupport]
		{
			ResourceName = Supplies
			Ratio = 0.0128 //0.0005
			DumpExcess = true
		}
		OUTPUT_RESOURCE:NEEDS[Snacks]
		{
			ResourceName = Snacks
			Ratio = 0.0128 //0.000034723
			DumpExcess = true
		}
		OUTPUT_RESOURCE:NEEDS[TacLifeSupport]
		{
			ResourceName = Food
			Ratio =  0.012 //0.000016927083333
			DumpExcess = true
		}
		OUTPUT_RESOURCE:NEEDS[TacLifeSupport]
		{
			ResourceName = Water
			Ratio =  0.006  //0.000011188078704
			DumpExcess = true
		}
		OUTPUT_RESOURCE:NEEDS[TacLifeSupport]
		{
			ResourceName = Oxygen
			Ratio =  0.012 //0.001713537562385
			DumpExcess = true
		}
		OUTPUT_RESOURCE:NEEDS[DeepFreeze]
		{
			ResourceName = Glykerol
			Ratio =  0.02
			DumpExcess = true
		}
	}
}


//Add USI Logistics
// - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
@PART[ds_boxred|ds_boxred_flat|ds_boxred_long|ds_boxwhite|ds_boxwhite_flat|ds_boxwhite_long]:NEEDS[000_USITools]
{
	MODULE
	{
		name = USI_ModuleResourceWarehouse
	}
}

@PART[dsts_spiceballoon]:NEEDS[000_USITools]
{
	MODULE
	{
		name = USI_ModuleResourceWarehouse
	}
}

@PART[dsts_gardenL|dsts_gardenM]:NEEDS[000_USITools]
{
	MODULE
	{
		name = USI_ModuleResourceWarehouse
	}
}


//Add TAC LS tanks to Spice Farms
// - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
@PART[dsts_gardenL|dsts_gardenM]:NEEDS[TacLifeSupport]
{
	//@cost += 278
	
	RESOURCE
	{
		name = Food
		amount = 0
		maxAmount = 1124
	}
	
	RESOURCE
	{
		name = Water
		amount = 0
		maxAmount = 743
	}
	
	RESOURCE
	{
		name = Oxygen
		amount = 0
		maxAmount = 113782
	}
	
	RESOURCE
	{
		name = Waste
		amount = 0
		maxAmount = 194
	}
	
	RESOURCE
	{
		name = WasteWater
		amount = 0
		maxAmount = 1796
	}
	
	RESOURCE
	{
		name = CarbonDioxide
		amount = 0
		maxAmount = 186560
	}
}


//Add USI LS tanks to Spice Farms
// - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
@PART[dsts_gardenL|dsts_gardenM]:NEEDS[USILifeSupport]
{
	//@cost += 12500
	
	RESOURCE
	{
		name = Supplies
		amount = 0
		maxAmount = 5000
	}
	
	RESOURCE
	{
		name = Mulch
		amount = 0
		maxAmount = 500
	}
}


//Add Snacks! to Spice Farms
// - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
@PART[dsts_gardenL|dsts_gardenM]:NEEDS[Snacks]:AFTER[Snacks]
{
	//@cost += 800
	
	@RESOURCE[Snacks]
	{
		@amount *= 2
		@maxAmount *= 2
	}
}